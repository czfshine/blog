# 关于自定义引发的一些思考

先交代下背景，最近在编写一个题库系统，提供试题与试卷供其他应用调用。第一个想法是抄个notion.so，功能基本上就是它的子集。对于一道题目（姑且称作一条数据）而言，考虑到以后的扩展性，数据项的数量和类型不想强制约定。即各条数据的属性和类型都可以自定义的。然后再将具有相同模式的题目合成一个题库，或者说就是一个数据库。还想再方便扩展，除了基本类型外，想自定义类型。目前有多选枚举（标签，知识点等）和单选枚举两种，单选枚举同时可细分到是非式和普通式。单选的话其实可以当做状态变量，为了实现一个DFA，还差状态的转移，所以将状态的跳转定义成操作。同样的，操作也是可自定义的，一个操作的基本信息就有起始状态，目标状态，过滤条件，触发条件等。这样可以组合成一个完整的状态机。

这里就有一个点了，**操作**从本质上来看，是不是能够对应一个特殊的自定义的题库（或者说数据库）。它的四个数据项分别可以对应单值，单值，多值，多值枚举。当然这里简化了一下，实际上每个操作有其对应的状态集，还有操作类型等。这里插下题外话，每个状态其实可以有个默认值和初始值（即没定义），然后可以有一个操作从初始状态跳到默认状态，触发条件选自动就行，这样在状态集的设置的时候就不用手动设置该状态集的默认值了。重点在于这样比起给状态集一个数据项为**默认值**好很多，考虑一下默认值的数据类型是什么。

有了状态之后，可以就对数据进行分组，聚集，和过滤了，这里再定义一个视图（或者说页面），每个视图可以显示某个题库使用某种显示形式的数据